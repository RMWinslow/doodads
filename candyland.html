<!DOCTYPE html>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
    body {margin: 0;}    h3 {margin-top:0;}
    dt {font-weight: bold;}    dl,dd {font-size: .9rem;}    dd {margin-bottom: 1em;}
    main{display:flex; flex-wrap: wrap;}
    svg {background-color:#F002; flex: 2 200px; }
    div {padding:1rem; flex: 3 20rem; min-height: 120vh;}
</style>
<!--This is a webpage implementation of the Massive Community Hexcrawl, orchestrated by Skerples.CC BY-NC-SA 4.0, etc.
You can find the original files here: https://coinsandscrolls.blogspot.com/2021/01/osr-massive-community-hexcrawl-complete.html
This file is completely standalone, so you can just save itas a .html and edit it in a text editor.-->

<main>
    <!--This is where all the pretty pictures will go. Map in the hexCanvas Group, position indicator in the highlightCanvas group, so it's always on top.-->
    <svg viewBox="0 0 10000 1" id="mysvg" preserveAspectRatio="xMidYMin meet">
        <g id="hexCanvas"></g>
        <g id="highlightCanvas"></g>
    </svg>
    <!--This is where the text will go.-->
    <div id="textHolder">Click on a hex.</div>
</main>

<script>
    //‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®
    //=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
    //Map Info
    //The Object below is what you want to modify in order to tweak the map content
    //=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
    //‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®‚ú®
    
    var hexMap = {
        numColumns:5,
        numRows:4,
        landformColors: {
            "Badlands": "PaleGoldenRod",
            "Barren Fells": "DarkGrey",
            "Bluffs": "Gainsboro",
            "Savannah": "YellowGreen",
            "Wastes": "SandyBrown",
            "Wastes": "SandyBrown",
            "Wastes": "SandyBrown",
            "Syrup Swamp": "Brown",
            "Peppermint Forest": "Pink",
        },
        factionColors: {
            "Neutral": "black",
            "Kalawi Tribe": "Purple",
            "Researchers": "Green",
            "Rust Monks": "	#B7410E",
            "Protean Army": "#0F52BA",
            "Pallid Knights": "White",
            "Bubblegum Dynasty": "White",
        },
        hexes: [
            {col:1, row:1, id:"hex1.1", faction:"Bubblegum Dynasty", landform:"Syrup Swamp", 
                terrainFeature: "Gray and rust-orange dirt, sickly brown grass. Metal beams protrude.  ", 
                obviousFeature: "Bands of eyeless purple- hued humans build small settlements. Will  trade warily, listen cautiously, speak rarely. ", 
                hiddenFeature: "The crater-tomb of the Water That Eats. Sacrificing a friend or love one to it grants a boon, often tainted. ", 
            },
            {col:1, row:2, id:"hex1.2", faction:"Neutral", landform:"Wastes", 
                terrainFeature: "Laminated layers of pristine volcanic glass, as if newly cooled. ", 
                obviousFeature: "Burbling volcanic pit, ringed by smooth metal gantries and floating wires. ", 
                hiddenFeature: "Slug-like magma sprites, jealous of their hidden mineral wealth. They swim through stone. ", 
                symbol: "üêÄ",
            },
            {col:1, row:3, id:"hex1.3", faction:"Rust Monks", landform:"Bluffs", 
                terrainFeature: "Hoodoo-lined cliff walls of banded ochre and ebon sandstone. ", 
                obviousFeature: "Cliff-dwellings with windows and eaves designed to 'sing' in the west wind with a meditative drone. ", 
                hiddenFeature: "Collections of mica-leaf volumes etched in alien tongues. Burned translation notes, signs of hasty flight. ", 
            },
            {col:1, row:4, id:"hex1.4", faction:"Pallid Knights", landform:"Barren Fells", 
                terrainFeature: "Angular shards of granite and basalt. Eerie hard-light shadows. ", 
                obviousFeature: "The Starlight Cathedral. Motes of starlight trapped to form windows, arches, pews. ", 
                hiddenFeature: "Pieces of iridescent weightless mirrors, accidentally created. They only reflect the truth. ", 
            },
            {col:2, row:1, id:"hex2.1", faction:"Rust Monks", landform:"Wastes", 
                terrainFeature: "Dry creek bed. Pockets of sticky liquid seep up and evaporate. ", 
                obviousFeature: "Suspended mesh parabolic dish, manoeuvred by wires and cranks. Twanging wires, creaking metal.  ", 
                hiddenFeature: "Fuschiagogue sky- prophet in monitoring dome, directs dish  operations, breeds winch-finches. ", 
            },
            {col:2, row:2, id:"hex2.2", faction:"Neutral", landform:"Wastes", 
                terrainFeature: "Salt-crusted dunes, scattered patches of red moss. ", 
                obviousFeature: "Huge hole in the ground, reflective green smoke billowing out of it. It drifts a long way before dissipating. ", 
                hiddenFeature: "At the bottom lies an ancient wurm corpse, slowly expelling clouds of acidic gas. Its eye is valuable. ", 
            },
            {col:2, row:3, id:"hex2.3", faction:"Rust Monks", landform:"Bluffs", 
                terrainFeature: "Sharp, jutting cliffs covered in artificial tessellations. ", 
                obviousFeature: "Watercarved stair winds up a cliff. Small niches hold meditating monks, watching the sky for rain. ", 
                hiddenFeature: "Every fifth alcove hides a rusted lever. Together they control the cliffs‚Äô patterns. Potentially a weapon. ", 
            },
            {col:2, row:4, id:"hex2.4", faction:"Pallid Knights", landform:"Barren Fells", 
                terrainFeature: "Jagged peaks capped with asbestos snow. ", 
                obviousFeature: "The Elevenfold Table, a monolithic construct on a flattened peak. Ringed by stairs, decrepit bridges. ", 
                hiddenFeature: "By the light of the moon, the shades Elevenfold Knights test new applicants and perhaps answer questions. ", 
            },
            {col:3, row:1, id:"hex3.1", faction:"Neutral", landform:"Badlands", 
                terrainFeature: "Jagged limestone outcrops. Few plants larger than lichen. ", 
                obviousFeature: "A single bristlecone pine, twisted by wind. Unreachable, always seems to be visible in the distance. ", 
                hiddenFeature: "A rock shelter, scratched with the names and portraits of people who have slept their. ", 
            },
            {col:3, row:2, id:"hex3.2", faction:"Neutral", landform:"Wastes", 
                terrainFeature: "Huge turtle shells lined with glimmering stars and old skulls. ", 
                obviousFeature: "City of mobile lights inside a shell. Pool in centre grants one wish per century. Time flows oddly. ", 
                hiddenFeature: "Sleeping void-clad corpse of a fallen starchild. White-furred ratman lives in its heart. ", 
            },
            {col:3, row:3, id:"hex3.3", faction:"Pallid Knights", landform:"Bluffs", 
                terrainFeature: "Steep canyons, steam leaking from sulphur-stained walls. ", 
                obviousFeature: "Floating pumice-island drifts. Monkey-like ghosts dart out of holes, try to steal organs. ", 
                hiddenFeature: "Island contains alcoves full of decorated brittle armour, coated in a mineral crust. ", 
            },
            {col:3, row:4, id:"hex3.4", faction:"Neutral", landform:"Barren Fells", 
                terrainFeature: "Jagged cliffs. Between them, craters filled with black glass. ", 
                obviousFeature: "A north-south pass.  Heavily fortified trading post run by mind- addled ex-Researcher.  ", 
                hiddenFeature: "A buried titan, dreaming. Nightmares manifest as solid shadows, hostile to all, but particularly Pallid Knights. ", 
            },
            {col:4, row:1, id:"hex4.1", faction:"Protean Army", landform:"Bluffs", 
                terrainFeature: "Oily rivulets bounded by yellow- streaked crumbling cliff faces.  ", 
                obviousFeature: "Metal-meat hybrid transport barracks halted for repairs. Wild animals fight nearby for cast-off scraps. ", 
                hiddenFeature: "A wurm nest lies calcified in a rock formation. It‚Äôs petrified occupants will reawaken if the area floods. ", 
            },
            {col:4, row:2, id:"hex4.2", faction:"Researchers", landform:"Bluffs", 
                terrainFeature: "Square-cut cliffs, right-angle rivulets of murky water.  ", 
                obviousFeature: "Broken golem factory- complex. Shattered ceramic orbs, maze of  conveyor belts and rusted arms. ", 
                hiddenFeature: "Golem-mine and geothermal magic loop in the bowels of the complex. Parasitic Researcher team. ", 
            },
            {col:4, row:3, id:"hex4.3", faction:"Protean Army", landform:"Barren Fells", 
                terrainFeature: "Desolate plateau, narrow arch bridges over dizzying chasms. ", 
                obviousFeature: "Camp of Proteans preparing to assault the Pallid keep in 4.4. Scouts, spies, and siege engines. ", 
                hiddenFeature: "Ruins of a lost city in the depths of the canyons, wreathed in toxic fog. Cursed weapons of ancient power. ", 
            },
            {col:4, row:4, id:"hex4.4", faction:"Pallid Knights", landform:"Barren Fells", 
                terrainFeature: "Windswept hills of stone and moss, small ponds scattered throughout. ", 
                obviousFeature: "A keep with a high tower perched atop a rocky crag. A ghostly call draws creatures from miles around. ", 
                hiddenFeature: "Warrens of tunnels and tombs below the keep hold the remains (and spirits) of the Pallid Knights. ", 
            },
            {col:5, row:1, id:"hex5.1", faction:"Neutral", landform:"Badlands", 
                terrainFeature: "Huge strip mine canyon. Stepped sides, heaps of spoil, fallen cables. ", 
                obviousFeature: "Cracked titan bones at the mine‚Äôs floor, leaking regenerating marrow from churning extraction plants. ", 
                hiddenFeature: "Buried marrow-vats, a small ocean of protein, awaiting the arrival of long-dead owners. ", 
            },
            {col:5, row:2, id:"hex5.2", faction:"Pallid Knights", landform:"Bluffs", 
                terrainFeature: "Pale granite slopes, blending into each other and concealing deep chasms. ", 
                obviousFeature: "Ghostly fortified tower collapses at sunrise, reassembles itself in reverse each sunset. ", 
                hiddenFeature: "Time-crypts of the Pallid Knights, where their greatest warriors rest and wait for the end of time. ", 
            },
            {col:5, row:3, id:"hex5.3", faction:"Rust Monks", landform:"Barren Fells", 
                terrainFeature: "High hill surrounded by tar pits and rivers. Leafless trees. ", 
                obviousFeature: "Walled monastery, bearded monks. Everything made from wood and stone. ", 
                hiddenFeature: "Shrine containing the coagulated soul of a wurm matriarch. Guarded by eight servitor-golems. ", 
            },
            {col:5, row:4, id:"hex5.4", faction:"Rust Monks", landform:"Bluffs", 
                terrainFeature: "Calderas of geothermally heated water form steep cascades. ", 
                obviousFeature: "Weathered stone monastery. Monks offer hospitality but slay those who find the tower. ", 
                hiddenFeature: "Beyond the path from the monastery, a tower of alien metal, infinitely tall. Unseen from a distance. ", 
            },
        ],
        encounters: {
            "Badlands": [
                {
                    omen:"Remains of animal dropped from on high. At night: flapping wings.",
                    event:"Flock of 2d6 nightgaunts subdue victims by grappling and tickling, carry them off to a random hex (1d8.1d10).",
                },
                {
                    omen:"Long scratches on rocks. At night: Leathery rustle, lantern-eye glow.",
                    event:"A lone nightgaunt sits on a perch, interrogating the unwary. ‚ÄúTell me a stooorrry,‚Äù it hisses, ‚Äúand I‚Äôll give you a preeesent.‚Äù",
                },
                {
                    omen:"Ringing bells, distant sobbing, groaning. Occasional shouting.",
                    event:"3d6 tax collectors riding camels, with 1d10 unfortunate debtors in chains. Proof of payment or money lets you pass.",
                },
                {
                    omen:"Synthetic-sounding pipe music, laughter, musky smell, shimmering.",
                    event:"A flying canvas citytent, populated by faerie people. A mobile bazaar, hotel, festival, and orgy. Reality is different inside.",
                },
                {
                    omen:"Barking laughter, panting, smell of wet fur and urine.",
                    event:"A hyena-ox, an escaped beast of burden. Visibly starving. Still muzzled. Pack contains a folded tent and a hammer.",
                },
                {
                    omen:"Patch of drying mud, stench of rotting meat.",
                    event:"A rust worm, born of a giant‚Äôs innards. Liquidizes mud to drag down prey. Smells awful, sounds worse.",
                },
                {
                    omen:"Plume of black smoke, earthquake rumble, crushed scenery.",
                    event:"A titan excavator, rumbling on triple treads, snapping at the smell of marrow and warm flesh. Hissing hydraulics, gantries.",
                },
                {
                    omen:"Flakes of rust, oil drips, bursts of garbled words and static.",
                    event:"1d4+1 rusting mechanical hounds on patrol. Attempt to inject targets with tranquilizer darts, drag to destroyed prison-lair.",
                },
                {
                    omen:"Trickle of water, small hardy shrubs, white slicks of dried salt.",
                    event:"A small spring protected by 1d6 transparent oozes. Paralytic touch, almost invisible.",
                },
                {
                    omen:"Translucent, iridescent, exoskeleton moults.",
                    event:"A giant psychedelic scorpion. Shoots pods from tail which disperse hallucinogenic spray, then attacks disoriented prey.",
                },
                {
                    omen:"Echoing shots, bright flashes, incoherent sobbing, weird ideas.",
                    event:"Lone wurm cultist entrenched on a mesa top. Desperate and on drugs, fires his memetic musket at anything that moves.",
                },
                {
                    omen:"Screech of rusted metal, sticky protein sinew webs.",
                    event:"A 13-legged titan rust spider, looking for protein dross to fuel its spinnerets and unusual objects for artistic projects.",
                },
                {
                    omen:"Shed skin, sinuous tracks. Burst of rattling.",
                    event:"A harmless gravel snake, imitating a more dangerous serpent. Grey-brown, feisty, delicious with salt.",
                },
                {
                    omen:"Whispers, intrusive thoughts. Smell of ointment and blood.",
                    event:"A Protean scout, head quivering with extra eyes and sensory jelly. Beams telepathic impressions back to command post.",
                },
                {
                    omen:"Harsh chemical smell, gurgling, drips of oil and fire.",
                    event:"2d6 globular firebelchers, like jelly-legged potion flasks full of kerosene. Adorable until they get hungry.",
                },
                {
                    omen:"Boreholes and pits, hoofprints, ragged tent and washing line.",
                    event:"A sand prospector and their donkey, searching for the perfect grade of filtration medium. That‚Äôs not it. That‚Äôs not it either.",
                },
                {
                    omen:"Whooping calls, triangular prints, flakes of pale skin.",
                    event:"2d6 vulture-hounds. Hairless, eyeless, beak, soft padded feet. They follow at a distance, looking for weakness or carrion.",
                },
                {
                    omen:"Regular crunching, small piles of washed pebbles, clawed footprints.",
                    event:"A boulder tortoise. steel-trap jaws ready to bite and maim. Makes a delicious but lethargy-inducing soup.",
                },
                {
                    omen:"Delicious smell of meat and spices, drops of gravy, trail of faint smoke.",
                    event:"Dubious cannibal commissary cart. Wrapped in bandages. Sells pies, sausages, delicacies. Not subtle. Buys bodies.",
                },
                {
                    omen:"Slimy hoofprints, distant warbling calls, acidic smell.",
                    event:"3d6 deer-snails. Mottled brown and white legs, pink shells, antlers with eyes on the end. Skittish, excellent climbers.",
                },
            ],
            "Barren Fells": [
                {
                    omen:"Bubbles, noxious fumes. Burping, wheezing, sighing. Soft splashes.",
                    event:"1d6 mire zombies, maybe melted together. Grasping claws, black skin stretched over bursting organs. Drag victims down.",
                },
                {
                    omen:"Hissing. Rising bands of steam. Smell of scalded earth. Heat.",
                    event:"A sublimator, glittering specks of light in roughly human shape. Flies. Solids it touches rapidly transition to gas. Hungry.",
                },
                {
                    omen:"Scrap of paper with an arrow drawn on it, held down by a stone.",
                    event:"2d4 paper golems, like silent origami humans. Limb-knives cut like steel. Gentle, but deadly when panicked. They fear fire.",
                },
                {
                    omen:"Hanging bulbous rocks, crisp salt- rimmed footprints.",
                    event:"A mineral dryad, inhumanly beautiful. Sustained by rare metals and esoteric alchemy. Trades geode-fruit and advice.",
                },
                {
                    omen:"Sled-like tracks, drifts of fresh snow, excavated animal corpse.",
                    event:"A parasitic alpine scorpion. Bear-sized, weather-bringing. Toxic causes paralysis and frostbite.",
                },
                {
                    omen:"Broken glass, acrid smells, strange clangs, beeps, curses.",
                    event:"1d6 Rsearchers, plus a servitor golem, carrying an aetheric telescope. Versed in astronomy, awful at terrestrial navigation.",
                },
                {
                    omen:"Fleeting memories, shivers of terror, creaking wood, warbling tones.",
                    event:"2d4 giant nightmare spiders, wearing the faces of old enemies or dead friends. Venemous, phase-shifted.",
                },
                {
                    omen:"Clang of metal, feverish whirring, curses, fountains of sparks.",
                    event:"1d4 geodesian wardens trying to repair their crash-landed flyer. What‚Äôs in the hold: tribute, weapons, prisoners, secrets?",
                },
                {
                    omen:"Flickers in the upper atmosphere, alteration of weather spells.",
                    event:"Meteorite storm. Causes spell mutations. Will cause physical mutations if exposed to the storm for too long.",
                },
                {
                    omen:"Clatter of wheels, soft click of limbs, flickering lantern-light.",
                    event:"A necromancer‚Äôs ambulatory carriage pulled/carried by 4 giant spiders. Sells potions, body parts, dubious advice.",
                },
                {
                    omen:"Icy chill, sparkles in the air, crunch of snow.",
                    event:"2d4 failed Pallid Knight aspirants, their agonized armoured bodies packed with asbestos crystals.",
                },
                {
                    omen:"Rising clicking, dancing stones, ridges of sand.",
                    event:"Shoal of harmless but inedible sand prawns, chittering and nipping. Bare flesh might be lacerated. Sleeping is impossible.",
                },
                {
                    omen:"Red vines, dangling skull-charms, sound of bending wood.",
                    event:"A creaking imp, bones and spikes overgrown with red lichen. Trades ingots of silver for souls, fresh or bottled.",
                },
                {
                    omen:"A single huge feather, sun- devouring shadow, harsh cry.",
                    event:"A roc, resplendent and gleaming, posing on a peak before taking to the air.",
                },
                {
                    omen:"Whooshing, fleeting shadows, sense of foreboding.",
                    event:"2d6 winged lions, white and grey against the sky, diving fast. They aim for necks and pack-beasts.",
                },
                {
                    omen:"Trail of salt, tall white banners, shrieking trumpets.",
                    event:"3d6 saltform traders, with 2d6 blind slaves and 1d4 large packbeasts. Trade high purity salt and healing for rumours.",
                },
                {
                    omen:"Grey mist, dimming light, drips of water falling upwards.",
                    event:"A wandering ghost. Insists it is not dead, cannot remember any details of life or goals. Frustrated by foggy amnesia.",
                },
                {
                    omen:"Cackling, rock-pillar totems, piles of gnawed bones, deep winding caves.",
                    event:"4d10 starving rock goblins. Camouflaged, cunning, one quarter teeth by weight. Burned by water.",
                },
                {
                    omen:"Zap and roil of lightning, blue-white glow,",
                    event:"2d6 lightning trees, migrating to a new peak. Black and white stripes, coronal discharge, platinum-tipped branches.",
                },
                {
                    omen:"Rising air pressure, growing light, flicker of raw magic.",
                    event:"A low-altitude comet, streaking and weaving. Size of a carriage, made of snow and grit, shedding dust and eerie light.",
                },
            ],
            "Bluffs": [
                {
                    omen:"Faint cart tracks near large bluff. Grating rock sound.",
                    event:"1d6 secretive Researchers with supply caravan. Strange equipment and liquids going in, biological samples going out.",
                },
                {
                    omen:"Dragonfly-hum, flicker of stained glass wings. Questing green laser.",
                    event:"Defective optical drone, wants to examine eyes for impurities, replace with leaking oil-soaked orbs if necessary.",
                },
                {
                    omen:"Low buzzing noise, drifts or red- orange dust. Smell of lightning.",
                    event:"1d12 rust nodules the size of a child‚Äôs fist, rolling along the ground. Infectious touch, makes the skin grow rust barnacles.",
                },
                {
                    omen:"Doubled corners, twisting perspective, blurred colours.",
                    event:"A dimension-displaced wurzle-lion, dragged through a malfunctioning gate . Half bird, half seal, half mad.",
                },
                {
                    omen:"Raspy rumbling, drops of blood, shallow furrows.",
                    event:"An injured sand mole. Blind, snuffling. Will pretend to be tame until the hook in its side is removed.",
                },
                {
                    omen:"Dried pond, crispy insect skins. Faint buzzing, swift shadows.",
                    event:"1d4 large dragonflies hover, turn, and strike. Can spay burning acid from tails, causing blindness and agony.",
                },
                {
                    omen:"Reverse waterfall, pressure headaches, nausea.",
                    event:"2d6 divergent Rust Monks, preparing a disruption mandala in a side canyon.",
                },
                {
                    omen:"Discarded crystals, burnt smell, drill whirring, grating martial hymn.",
                    event:"Glitchy spider-like mining robot believes itself to be a mounted Protean Knight. Looking for a commander to report to.",
                },
                {
                    omen:"The sound of glass clinking, a smell of ozone. Hair stands on end.",
                    event:"2d12+1 fulgurites, tiny clouds of glass shards animated by lightning. Will attack any player using an electric device first.",
                },
                {
                    omen:"Desiccated bodies impaled on dead tree branches. Some are gnawed.",
                    event:"A shrike-roc nests nearby. Strikes isolated targets by surprise, impales them for later. Nest contains rare spices.",
                },
                {
                    omen:"Crude poles topped with skulls. Half-eaten, animal carcasses.",
                    event:"2d6 yetisyn bandits, crass and lustful apemen cast out from the higher peaks, armed with crude clubs and cruel teeth.",
                },
                {
                    omen:"Lumps of burning stone, purple scorch marks, cracked stone.",
                    event:"A phosphorus dragon roams, searching for rare metals and unusual chemicals. Beware its deadly breath.",
                },
                {
                    omen:"Freshly broken camp, offerings to nebulous gods.",
                    event:"2d6 members of theKalawi tribe. To see what they are hunting or tracking roll another 1d20 on this list.",
                },
                {
                    omen:"High-pitched tone, warm breeze, smell of chalk and hot oil.",
                    event:"A 50‚Äô cube of shimmerfish, riding a heat haze. Bursts eyes, plugs nostrils, clogs lungs, worms into ears.",
                },
                {
                    omen:"Flash of azure and gold, high piping cry, shed hair-like feathers.",
                    event:"A dire peacock. Hypnotic feathers induce paralysis, then madness. Very valuable if captured or carefully killed.",
                },
                {
                    omen:"Bifurcated boulders, winding cracks, tin-sheet warbling.",
                    event:"A young razorwurm, thin as paper but as hard as steel. Cuts ankles, slices through armour, challenges swords.",
                },
                {
                    omen:"Infrasonic booms, odd winds, olive scales, claw scratches.",
                    event:"3d6 howler lizards, throat-sacs full of pressurized air. Deafening at 50‚Äô, potentially deadly at 10‚Äô.",
                },
                {
                    omen:"Tinny chattering, scraps of brown cloth, wisps of white smoke.",
                    event:"A False Rust Monk, constructed from minute gearwheels and heretical doctrine-wafers. Can solve mathematical problems.",
                },
                {
                    omen:"Distant thunder, acrid smoke, posthole clawprints.",
                    event:"A biomechanical war crab, festooned with smoking barrels and chitin lances. Slow but very deadly. Sawblade claws.",
                },
            ],
            "Savannah": [
                {
                    omen:"Clacking, creaking, rhythmic marching, flakes of rust.",
                    event:"3d6 wandering skeletons. Rusting equipment, recently applied warpaint, sharpened fingers and teeth.",
                },
                {
                    omen:"Earth rumbling, something whizzes through the air.",
                    event:"2d6 members of theKalawi tribe hunting an elephant, tiring him out. Angered if their kill is stolen.",
                },
                {
                    omen:"Thrumming felt in the skull. Sound of clanking armour. Muttering.",
                    event:"A Protean knightmare, a psychic mutant amalgamation of knights. Coated in armour, well armed, fast, argumentative.",
                },
                {
                    omen:"Strange tracks; thumb-sized holes in the loam, horizon to horizon.",
                    event:"A bone picker, stilt-walking hooded semi-undead scavenger. Imperious. Trades baubles for clean meat and dry socks.",
                },
                {
                    omen:"Cracked earth, holes from root networks. A large whistling tree.",
                    event:"A hoard gullet disguised as plant life. Brilliant, gluttonous. Inhales with hurricane-force winds. Inhaled creatures slumber.",
                },
                {
                    omen:"Sweltering heat. Sound of breaking branches. Smell of sap.",
                    event:"A baobab branch appears far above. Thick blue leaves, shimmering bark, no trunk. Its oval fruits are priceless.",
                },
                {
                    omen:"Silk scraps caught on trees, bursts of melodic song, silver scraps.",
                    event:"A young harpy covered in ragged finery and loops of jewellery. Will (incompetently) tell fortunes for treasure. Means well.",
                },
                {
                    omen:"Instant headache, flickers of false memories.",
                    event:"Herd of 2d6 psychic elephants. Purple corona of psy-discharge. Infrasonic trumpeting. Sparks of raw magic and trapped souls.",
                },
                {
                    omen:"Deep hoofprints, drifting violet tracker-kite.",
                    event:"Migratory herd of 3d6 scale-kine. Horned, plated, bulky, and suspicious of two-legged predators.",
                },
                {
                    omen:"Rippling thunder underfoot, creaking stone.",
                    event:"Swarm of fossilized sea life, animated by confused ghosts. A small ankle-breaking wave of stone.",
                },
                {
                    omen:"Winding trail of slime, blood, and dying plant life.",
                    event:"A Protean soldier, overcome by mutation, disintegrates into helpless flesh and raw matter.",
                },
                {
                    omen:"Laughter and singing, occasional shots. Broken twigs as marks.",
                    event:"2d4 overconfident and haughty Researchers, led by 2 untrustworthyKalawi guides. Faulty monster-warding device.",
                },
                {
                    omen:"Low trumpeting, passing headache, zigzagging elephant tracks.",
                    event:"A golem made to imitate a psychic elephant. Observed from a distance by 2 Researchers that created it.",
                },
                {
                    omen:"Mild headache, wiff of nostalgia and regret.",
                    event:"An animated psychic elephant skeleton on a half-remembered dream march. Flickering purple bones.",
                },
                {
                    omen:"Furrow in the earth. Hundreds of yards long, 20‚Äô wide. Wurmsign.",
                    event:"3d6 wurm parasites, cast off and dying in the sun. Looking for new hosts. Enough energy for one or two leaps.",
                },
                {
                    omen:"Purring and snoring, incredulous yowls, shining yellow eyes.",
                    event:"A fat and torpid pumble cat, full of fieldmice and sagacity. Appreciates delicacies, offers nothing in return.",
                },
                {
                    omen:"Clanking, screaming metal, flakes of rust, trail of upturned plants.",
                    event:"2d6 armoured rhinos, plated in iron and brass. Intelligent but impatient. Demands, not negotiations.",
                },
                {
                    omen:"Bright yellow eyeshine, flash of white fur, snake-like tail, hissing.",
                    event:"An eye-grabbing lemur. Long scooping fingers, quick reactions, insatiable hunger for squishy ocular orbs.",
                },
                {
                    omen:"Floating spherical balloon, spare ropes, smell of pepper.",
                    event:"An aeronautical land-diver, tethered to their support balloon. Green liquid in a brass suit. Gurgles, collects samples.",
                },
                {
                    omen:"Wild laughter that devolves into muttering, smell of rotten meat,",
                    event:"A grand hyenacore, a hyena with a human face. Loves jokes and meat equally, but cannot abide sarcasm or hypocrisy.",
                },
                {
                    omen:"Smell of ozone, fast-moving clouds, twinkling air, dropping temperature.",
                    event:"A sudden cloudburst. Clothes and food soaked, books dampened. Grass immediately revives, flowers in hours.",
                },
            ],
            "Wastes": [
                {
                    omen:"Reflective green cloud drifting towards the PCs, shining bright.",
                    event:"Floating cloud of rusting gas. Dissolves non-living matter. Drifts in a thick layer 2-3‚Äô above the ground.",
                },
                {
                    omen:"Boneless, tar-coated coyote corpse, decaying flesh mostly intact.",
                    event:"Blob of sentient tar. Wants to slurp up bones. +1 HD per skeleton absorbed, approximates combined shape of victims.",
                },
                {
                    omen:"Pungent, foul stench. Melted bones and stone. Sharp hissing.",
                    event:"1d4 acrid jellyfish, gently floating. Tendrils move with lethal swiftness, paralyzing and digesting. Leaks and sprays acid.",
                },
                {
                    omen:"Soft singing and distant chords, dizziness. Shimmering mirages.",
                    event:"A starlet, whirling colourful fluid and song. Playful, wants to dance. Warps gravity and space around it. Inimical to earthly life.",
                },
                {
                    omen:"Multicoloured shooting star appears overhead. Sound of singing.",
                    event:"Four bright ones, searing motes of starstuff, collecting memory- tributes for the High Machine. Speak via magnetic dust.",
                },
                {
                    omen:"Distant snatches of deep and cloying song. Splashes. Fumes.",
                    event:"2d4 lugubrious petroleum mermaids sing and cavort in a tar pit. They will trade hydrocarbon pearls for shiny baubles.",
                },
                {
                    omen:"Horrid bleach scent drifts by. Skin crackles, nose burns, eyes sting.",
                    event:"A sickly Protean squire staggers blindly, tears streaming down its creased face. Its lower back writhes with larval parasites.",
                },
                {
                    omen:"An unbroken red trail, neither paint nor blood, stains the ground.",
                    event:"1d3 red ooze centaurs. Slug below, melting humanoid above. Faces contorted into soundless screams. Vaporizes iron.",
                },
                {
                    omen:"Subterranean gurgling, shed teeth, smell of ammonia.",
                    event:"1d6 predatory craters try to blend in with the landscape. Lure victims with gold tongues. Slow but very large.",
                },
                {
                    omen:"Popping and boiling stone, heat wave, angry squealing.",
                    event:"2d6 magma sprites swimming through stone. Can instantly ignite clothing and flesh at a touch.",
                },
                {
                    omen:"Singing, a high pitched whine, like glass edges rubbed together.",
                    event:"Three bramble fiends, smoke in their veins and silica in their throats, planting young glass brambles in sandy soil.",
                },
                {
                    omen:"Whooping hypersonic wails, rumbling, burrows, mounds.",
                    event:"A burrowing progenitor-wurm seeks the creatures that stole its selenium egg. Repelled by lightning, salt, and writing.",
                },
                {
                    omen:"Sizzling oil, groaning metal, stabbing lights, smoke trails.",
                    event:"A machine demon, all gears and fluids. Will trade enhanced robot parts and electrical power for pieces of soul.",
                },
                {
                    omen:"Clang of metal, disassembled mechanisms, bare footprints.",
                    event:"1d6+1 ever-silent Rust Monks scavenge for pieces of broken machinery and arrange them into a garden inside a crater.",
                },
                {
                    omen:"A smell of corrosion. Marching- songs in a dead language. Ticking.",
                    event:"1d4 ancient clockwork soldiers, bearing faded flags. They may attempt to bargain for replacement parts, or attack the party.",
                },
                {
                    omen:"Fresh boot marks, discarded chemical testing equipment.",
                    event:"1d8 Protean soldiers searching for chemical resources. Willing to offer information or medical services.",
                },
                {
                    omen:"Blaring musical note, red filter, waving and folding vegetation.",
                    event:"A floating glyph of warding, like a crack in reality. Pours ethereal bloodlight into the world. Cannot approach.",
                },
                {
                    omen:"Oil slick wake, flensed corpses, splatters of dense tar.",
                    event:"A beached tarpit kraken. Enraged, confused, dying, and still hungry. Flammable, but dangerously quick.",
                },
                {
                    omen:"Nausea, sweating, headaches, bitter taste, shimmering air.",
                    event:"A decaying plutonium golem. Leaking gouts of corium, still clad in burning graphite armour. Will forever taint the land.",
                },
                {
                    omen:"Trails of clean sand and polished bones, quiet popping, smell of salt.",
                    event:"3d6 horse-sized land starfish, in a variety of pastel colours. Harmless unless you lie down and allow them to gnaw on you."
                },
            ],
        }
    }
    
</script>




































<!--The rest of this file is just janky code to turn the list into an interactive map. You hopefully don't need to touch any of this stuff.-->
<script>
    //define the parameters for the hex map.
    var numColumns = hexMap.numColumns;
    var numRows = hexMap.numRows;
    var hexOuterRadius = 30; 
    var hexInnerRadius = hexOuterRadius * Math.sqrt(3)/2; 
    var marginSize = hexOuterRadius / 5;
    
    //calculate internal dimensions of map, assuming hexes are oriented with flat side on top.
    var totalWidth = hexOuterRadius * (numColumns*1.5 + 0.5); 
    var totalheight = hexInnerRadius * (2 * numRows + 1);

    //set up the svg to use as a canvas
    var canvas = document.getElementById("hexCanvas");
    //scale the svg height to the window height. I dunno. I think it looks nice that way. Will probably look turbo janky on mobile. Note the body {margin: 0;} up top that makes this work.
    //canvas.setAttribute("height", window.innerHeight);
    //Fiddle with the interior dimensions of the svg to make it the right size for the hex grid. margin around the edges
    document.getElementById("mysvg").setAttribute("viewBox", "-"+marginSize+" -"+marginSize+" " + (totalWidth+2*marginSize) + " " + (totalheight+2*marginSize));

    //------------------------------------
    // Functions for building the map
    //------------------------------------
    
    function addToCanvas(addedContent) {
        //This function just takes a string and appends it to the inside of the canvas svg.
        canvasContent = canvas.innerHTML;
        canvas.innerHTML += addedContent;
    }

    function translatePoint(x,y,theta,r) {
        //a snippet of math I use to build the points of a hex by moving out from the center at different angles.
        newy = y+r*Math.sin(theta);
        newx = x+r*Math.cos(theta);
        return [newx,newy];
    }
    function createHexagon(x,y,r,fill,stroke, id){
        //base angle and incremental angle. Changing ba to PI/6 will orient the hex with pointy side up. 
        var ba = 0;
        var ia = Math.PI/3;
        //find vertices
        var vertices = [];
        for (var i = 0; i < 6; i++) { 
            vertices[i] = translatePoint(x,y,ba+i*ia,r);
        }
        //translate all this info into svg format.
        var svgHex = `<polygon points="POINTSPLACEHOLDER" fill="FILLPLACEHOLDER" stroke="STROKEPLACEHOLDER" id="IDPLACEHOLDER"/>`;
        svgHex = svgHex.replace("POINTSPLACEHOLDER",vertices.join());
        svgHex = svgHex.replace("FILLPLACEHOLDER",fill);
        svgHex = svgHex.replace("STROKEPLACEHOLDER",stroke);
        svgHex = svgHex.replace("IDPLACEHOLDER",id);
        return svgHex;
    }
        
    function createText(x,y,h,fill, stroke, text){
        var svgText = `<text x="XPLACEHOLDER" y="YPLACEHOLDER" 
            dominant-baseline="middle" text-anchor="middle" 
            style="font-family: sans-serif;" font-size="FONTSIZEPLACEHOLDER" font-weight="bold"
            fill="FILLPLACEHOLDER" 
            stroke="STROKEPLACEHOLDER" stroke-opacity="0" stroke-width="0.3">
                TEXTPLACEHOLDER
            </text>`;
        var svgText = `<foreignObject x="XPLACEHOLDER" y="YPLACEHOLDER" width="WIDTHPLACEHOLDER" height="9999">
                <div style="color: FILLPLACEHOLDER; text-align:center; padding:0; font-family: sans-serif; font-size:FONTSIZEPLACEHOLDERpx; font-weight:bold;">
                    TEXTPLACEHOLDER
                </div>
            </foreignObject>`;
        svgText = svgText.replace("XPLACEHOLDER",x-hexInnerRadius);
        svgText = svgText.replace("YPLACEHOLDER",y);
        svgText = svgText.replace("WIDTHPLACEHOLDER",hexInnerRadius*2);
        svgText = svgText.replace("FILLPLACEHOLDER",fill);
        svgText = svgText.replace("STROKEPLACEHOLDER",stroke);
        svgText = svgText.replace("FONTSIZEPLACEHOLDER",h);
        svgText = svgText.replace("TEXTPLACEHOLDER",text);
        return svgText;
    } 

    function createHexGroup(hex) {
        //pass in a hex object from the hexMap definition way up top, and this will convert it into an svg group form.
        //first, do some math to figure out the centerpoint of the hex
        hexX = hexOuterRadius * (1.5 * hex.col - 0.5);
        hexY = hexInnerRadius * (2 * hex.row - hex.col % 2);
        //now do some syntax shenanigans to build a group with background, coordinate text, and faction text, etc.
        //We need to group it so that we can respond to clicks on the enter thing
        svgGroup = `<g id="`+hex.id+`" onClick="clickHex(this.id)">`
        svgGroup += createHexagon(hexX,hexY,hexOuterRadius,hexMap.landformColors[hex.landform],"black", hex.id);
        svgGroup += createText(hexX,hexY-hexInnerRadius*0.4,hexOuterRadius*0.6,hexMap.factionColors[hex.faction], "black", hex.col+"."+hex.row);
        svgGroup += createText(hexX,hexY+hexInnerRadius*0.3,hexOuterRadius*0.2,hexMap.factionColors[hex.faction], "none", hex.faction);
        if (hex.symbol){
            svgGroup += createText(hexX,hexY-hexInnerRadius*0.8,hexOuterRadius*0.3,hexMap.factionColors[hex.faction], "none", hex.symbol);
        }
        svgGroup += `</g>`;
        return svgGroup;
    }

    //------------------------------------
    // Now we actually build it.
    //------------------------------------

    for (var hex of hexMap.hexes){
        addToCanvas(createHexGroup(hex));
    }


    //------------------------------------
    // Handle clicks on the hexes.
    //------------------------------------

    function rD(i){return i[Math.floor(Math.random()*i.length)];}

    function clickHex(hexID){
        hex = hexMap.hexes.filter(function(hex){return hex.id == hexID})[0];//sorry
        console.log(hex);

        textHolder = document.getElementById("textHolder");

        textContent = `<h3>HEADERPLACEHOLDER</h3>
                        <dl>
                            <dt>Terrain:</dt>
                            <dd>TERRAINPLACEHOLDER</dd>
                            <dt>Obvious Feature:</dt>
                            <dd>OBVIOUSPLACEHOLDER</dd>
                            <dt>Hidden Feature:</dt>
                            <dd>HIDDENPLACEHOLDER</dd>
                        </dl>
                        <hr>
                        <h3>Random Encounter:</h3>
                        <dl>
                            <dt>Omen:</dt>
                            <dd>OMENPLACEHOLDER</dd>
                            <dt>Encounter:</dt>
                            <dd>ENCOUNTERPLACEHOLDER</dd>
                        </dl>
                        `;
        textheader =  hex.col+"."+hex.row+" - "+hex.faction+" - "+hex.landform;
        textContent = textContent.replace("HEADERPLACEHOLDER",textheader);
        textContent = textContent.replace("TERRAINPLACEHOLDER",hex.terrainFeature);
        textContent = textContent.replace("OBVIOUSPLACEHOLDER",hex.obviousFeature);
        textContent = textContent.replace("HIDDENPLACEHOLDER",hex.hiddenFeature);

        encounterdraw = rD(hexMap.encounters[hex.landform]);
        textContent = textContent.replace("OMENPLACEHOLDER",encounterdraw.omen);
        textContent = textContent.replace("ENCOUNTERPLACEHOLDER",encounterdraw.event);

        textHolder.innerHTML = textContent;

        //this adds a little outline to the most recently clicked hex.
        //The svg up above has a seperate group that's always on top of the canvas to make this work.
        hexX = hexOuterRadius * (1.5 * hex.col - 0.5);
        hexY = hexInnerRadius * (2 * hex.row - hex.col % 2);
        document.getElementById("highlightCanvas").innerHTML = createHexagon(hexX,hexY,hexOuterRadius*1.1,"none","black", hex.id);
    }

</script>

<!--Here's an implementation of a similar concept using an actual canvas element: https://www.rareese.com/blog/hexagonjs-->


